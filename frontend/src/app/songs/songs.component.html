<h2>Ajouter une chanson</h2>
<form (ngSubmit)="addSong()">
  <label>Titre :</label>
  <input type="text" [(ngModel)]="newSong.title" name="title" required />
  <br />

  <label>Artiste :</label>
  <input type="text" [(ngModel)]="newSong.artist" name="artist" />
  <br />

  <label>Genre :</label>
  <input type="text" [(ngModel)]="newSong.genre" name="genre" />
  <br />

  <label>URL audio :</label>
  <input type="text" [(ngModel)]="newSong.url" name="url" />
  <br />

  <label>Ou importer un fichier audio :</label>
  <input type="file" accept="audio/*" (change)="handleFileUpload($event)" />
  <br />

  <button type="submit">Ajouter</button>
</form>

<hr />

<h2>Liste des chansons</h2>

<label>
  <input type="checkbox" [(ngModel)]="showOnlyFavorites" name="filterFavorites" />
  Afficher uniquement les favoris
</label>

<ul>
  <li *ngFor="let song of filteredSongs()">
    <strong>{{ song.title }}</strong> ‚Äì {{ song.artist }} ({{ song.genre }})
    <br />

    <!-- Lecture / Pause -->
    <button *ngIf="!audioService.isPlaying(song.url)" (click)="play(song.url)">‚ñ∂Ô∏è √âcouter</button>
    <button *ngIf="audioService.isPlaying(song.url)" (click)="pause()">‚è∏Ô∏è Pause</button>

    <!-- Favoris -->
    <button (click)="toggleFavorite(song)">
      {{ isFavorite(song) ? 'üíî Retirer' : '‚ù§Ô∏è Favori' }}
    </button>

    <!-- Ajout √† playlist -->
    <div>
      <label>Ajouter √† la playlist :</label>
      <select (change)="onPlaylistSelect($event, song)">
        <option value="">-- S√©lectionner --</option>
        <option *ngFor="let playlist of playlists" [value]="playlist._id">
          {{ playlist.name }}
        </option>
      </select>
    </div>
  </li>
</ul>

<hr />

<h2>Cr√©er une playlist</h2>
<form (ngSubmit)="createPlaylist()">
  <input type="text" [(ngModel)]="newPlaylistName" name="playlistName" placeholder="Nom de la playlist" required />
  <button type="submit">Cr√©er</button>
</form>

<hr />

<h2>Playlists existantes</h2>
<ul>
  <li *ngFor="let playlist of playlists">
    <strong>{{ playlist.name }}</strong>
    <ul>
      <li *ngFor="let song of playlist.songs">
        {{ song.title }} ‚Äì {{ song.artist }}
      </li>
    </ul>
  </li>
</ul>
